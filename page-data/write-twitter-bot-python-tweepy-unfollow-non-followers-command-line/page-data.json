{"componentChunkName":"component---src-templates-blog-post-js","path":"/write-twitter-bot-python-tweepy-unfollow-non-followers-command-line/","result":{"data":{"markdownRemark":{"html":"<p>What do you call those people who don’t follow you back on Twitter? Celebrities? News outlets? Using the Python tweepy library, we will write a bot to easily unfollow non-followers from the command line.</p>\n<p>First, log in to <a href=\"https://dev.twitter.com\" title=\"https://dev.twitter.com\">https://dev.twitter.com</a> and create a new application.</p>\n<p>The create a file, <code class=\"language-text\">keys.py</code>, and fill it in with the appropriate information:</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">keys <span class=\"token operator\">=</span> <span class=\"token builtin\">dict</span><span class=\"token punctuation\">(</span>\n    screen_name <span class=\"token operator\">=</span> <span class=\"token string\">'xxxxxxxxx'</span>\n    consumer_key <span class=\"token operator\">=</span>          <span class=\"token string\">'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'</span><span class=\"token punctuation\">,</span>\n    consumer_secret <span class=\"token operator\">=</span>       <span class=\"token string\">'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'</span><span class=\"token punctuation\">,</span>\n    access_token <span class=\"token operator\">=</span>          <span class=\"token string\">'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'</span><span class=\"token punctuation\">,</span>\n    access_token_secret <span class=\"token operator\">=</span>   <span class=\"token string\">'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>Now create a file, <code class=\"language-text\">unfollow.py</code> , and add the following(pun intended):</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\">#! /usr/bin/python</span>\n<span class=\"token keyword\">import</span> tweepy\n<span class=\"token keyword\">from</span> keys <span class=\"token keyword\">import</span> keys\n\nSCREEN_NAME <span class=\"token operator\">=</span> keys<span class=\"token punctuation\">[</span><span class=\"token string\">'screen_name'</span><span class=\"token punctuation\">]</span>\nCONSUMER_KEY <span class=\"token operator\">=</span> keys<span class=\"token punctuation\">[</span><span class=\"token string\">'consumer_key'</span><span class=\"token punctuation\">]</span>\nCONSUMER_SECRET <span class=\"token operator\">=</span> keys<span class=\"token punctuation\">[</span><span class=\"token string\">'consumer_secret'</span><span class=\"token punctuation\">]</span>\nACCESS_TOKEN <span class=\"token operator\">=</span> keys<span class=\"token punctuation\">[</span><span class=\"token string\">'access_token'</span><span class=\"token punctuation\">]</span>\nACCESS_TOKEN_SECRET <span class=\"token operator\">=</span> keys<span class=\"token punctuation\">[</span><span class=\"token string\">'access_token_secret'</span><span class=\"token punctuation\">]</span>\n\nauth <span class=\"token operator\">=</span> tweepy<span class=\"token punctuation\">.</span>OAuthHandler<span class=\"token punctuation\">(</span>CONSUMER_KEY<span class=\"token punctuation\">,</span> CONSUMER_SECRET<span class=\"token punctuation\">)</span>\nauth<span class=\"token punctuation\">.</span>set_access_token<span class=\"token punctuation\">(</span>ACCESS_TOKEN<span class=\"token punctuation\">,</span> ACCESS_TOKEN_SECRET<span class=\"token punctuation\">)</span>\napi <span class=\"token operator\">=</span> tweepy<span class=\"token punctuation\">.</span>API<span class=\"token punctuation\">(</span>auth<span class=\"token punctuation\">)</span>\n\nfollowers <span class=\"token operator\">=</span> api<span class=\"token punctuation\">.</span>followers_ids<span class=\"token punctuation\">(</span>SCREEN_NAME<span class=\"token punctuation\">)</span>\nfriends <span class=\"token operator\">=</span> api<span class=\"token punctuation\">.</span>friends_ids<span class=\"token punctuation\">(</span>SCREEN_NAME<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">for</span> f <span class=\"token keyword\">in</span> friends<span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">if</span> f <span class=\"token keyword\">not</span> <span class=\"token keyword\">in</span> followers<span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">print</span> <span class=\"token string\">\"Unfollow {0}?\"</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span>api<span class=\"token punctuation\">.</span>get_user<span class=\"token punctuation\">(</span>f<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>screen_name<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">if</span> <span class=\"token builtin\">raw_input</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Y/N?\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token string\">'y'</span> <span class=\"token keyword\">or</span> <span class=\"token string\">'Y'</span><span class=\"token punctuation\">:</span>\n            api<span class=\"token punctuation\">.</span>destroy_friendship<span class=\"token punctuation\">(</span>f<span class=\"token punctuation\">)</span></code></pre></div>\n<p>To run it from the command line:</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">python unfollow<span class=\"token punctuation\">.</span>py</code></pre></div>\n<p>You will be prompted to unfollow the non-followers you are currently following. Goodbye, parasites!</p>\n<p>Let’s step through it.</p>\n<p>The first few blocks should be familiar to you by now: we import tweepy, our keys, and connect to the Twitter API. In the next two blocks perform a similar role, we create lists, and populate them with followers and friends.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">followers <span class=\"token operator\">=</span> api<span class=\"token punctuation\">.</span>followers_ids<span class=\"token punctuation\">(</span>SCREEN_NAME<span class=\"token punctuation\">)</span>\nfriends <span class=\"token operator\">=</span> api<span class=\"token punctuation\">.</span>friends_ids<span class=\"token punctuation\">(</span>SCREEN_NAME<span class=\"token punctuation\">)</span></code></pre></div>\n<p>Next, we iterate over <code class=\"language-text\">friends</code> and use an if statement to check whether or not each element of friends is in <code class=\"language-text\">followers</code>. Before we destroy the friendship, we ask for verification.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">for</span> f <span class=\"token keyword\">in</span> friends<span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">if</span> f <span class=\"token keyword\">not</span> <span class=\"token keyword\">in</span> followers<span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">print</span> <span class=\"token string\">\"Unfollow {0}?\"</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span>api<span class=\"token punctuation\">.</span>get_user<span class=\"token punctuation\">(</span>f<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>screen_name<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">if</span> <span class=\"token builtin\">raw_input</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Y/N?\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token string\">'y'</span> <span class=\"token keyword\">or</span> <span class=\"token string\">'Y'</span><span class=\"token punctuation\">:</span>\n            api<span class=\"token punctuation\">.</span>destroy_friendship<span class=\"token punctuation\">(</span>f<span class=\"token punctuation\">)</span></code></pre></div>\n<p>It’s a simple matter of setting this up to run automatically with a cron job. That’s against Twitter’s Best Practices, so I’ll leave you to figure it out for yourself.</p>","excerpt":"What do you call those people who don’t follow you back on Twitter? Celebrities? News outlets? Using the Python tweepy library, we will…","frontmatter":{"title":"Write a Twitter Bot with Python tweepy to Unfollow Non-Followers from the Command Line","author":"Jared Nielsen","category":"tutorial","image":{"childImageSharp":{"fluid":{"tracedSVG":"data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='400'%20height='224'%20viewBox='0%200%20400%20224'%20preserveAspectRatio='none'%3e%3cpath%20d='M3%204c-4%205-5%2015-1%2013l1%201v1l1-2c-1-1%200-1%201-1%202%201%203%202%204%206%203%207%203%207-3%2010l-5%202-1%2013v13l3-1c6-2%207-1%202%202-4%202-5%202-5%205v3l4-2c4-3%2011-4%2012-3l-3%203C9%2069%200%2077%200%2079s1%201%204-1c4-4%2014-9%2018-9%205%200%205%203%200%204l-10%207c-5%205-5%205-8%205-4-1-4-1-4%201l1%202%2021%206h5l-4-2c-4-3-7-8-4-10l2-3%202-1c1%201%202%200%203-1h5c2%201%202%201%202-1-2-3%200-2%203%203%208%2011%2014%2019%2017%2020%203%202%2011%203%2016%201%206-3%204-1-6%205-5%203-6%206-5%2011%202%207%2010%2014%2014%2013h1l2%202%201%202c-1%201-7%200-8-1h-2c-2%202-5%203-5%202l-2-1c-2%200-3-1-3-2-1-1%200-1%204-1h4c-2-1-9-8-11-12-1-4-2-4-4-3l-3-1%203-1c3%200%203-1-1-9-4-9-6-11-10-10-3%200-4%202-1%204%201%201%202%207%200%207l-1-2c0-3-3-5-6-5-2%201-2%201%201%202%204%203%202%204-2%202h-6l-4%201h-8c-4-1-5-1-2%201l3%202-1%201c0-1-2%200-3%202l-4%202-4%204c0%202%201%201%206-2l14-8-1%204-2%208c0%204%200%204%203%203h3c-2%202-1%203%202%202h4l-4%203-5%203h-1c-3-1%200%206%204%209l1%202c-6-2-6-2-3%200%202%202%206%203%205%201l4%201%208%202c3%200%204%200%203%201v4l-2%204-2%204-5%209c-5%209-5%208%201%2018l8%2015%204%208v-6l1-19c1-17%202-20%204-26%202-3%203-4%204-3l3-2%203-2%202-2%202-3%206%205%202%201c1-1%202%200%202%201h2l1%201v3c2%201%203%206%201%207-2%200-1%203%201%203v4c-2%202-2%203%200%204%202%202%200%206-11%2018-9%2010-11%2012-9%2012l3%201%203%202%207%201c-2%201-10%201-13-1l-3-1-4%203c-3%202-4%202-6%200-3-2-8-1-8%203-1%202-3%203-3%201l-1-2v-1l2-1v-2c3-3-6-13-13-14h-5l3%205c4%205%204%205%202%204h-6l-11-1-6-2v3c0%202%201%203%203%205l3%202h2l2%201v1l1-1c1-2%203-3%203-1l2%203v2c-3-1-3%201%200%207l1%205h8c6%200%207%200%2010-3%204-3%204-3%204-1l1%203c-1%201%200%201%201%201%203%200%205-3%206-8%200-6%201-6%205-6%203%201%206%200%205-1l2-1c3%200%203%200%202%205l-1%205c2-1%203-2%203-5%200-2%202-4%204-5%202%200%203%203%201%2011l-2%205h10l-2-4c-2-4-2-11%201-17l1-8%201-8c2-3%204-8%204-13l2-7c3-6%204-16%202-19-1-1-1-1-1%201v3l-1-1c0-3-6-9-10-10l-5-1h-9l-6%205c-3%203-5%204-5%203l-2-3c-2-2-2-2%204-3a620%20620%200%200027-9l4%202%206%205c3%204%204%203%201%200v-3s2%201%202%203c2%202%202%202%201-2%200-2%200-4%201-3%200%202%202%203%203%203v-1h1c4%202%2019%202%2039-2%209-1%2010-1%206%202-6%204-12%2011-15%2018l-4%207c-1%201-2%203%200%203h1l-3%2010-4%2011c-5%2013-8%2019-8%2017-1-1-1%200-1%201l-2%207-2%206h-1c-2-2-1-6%201-8%202-3%203-5%201-5-3%201-2%200%201-4l4-2%201-2c0-2-1-3-5-3h-4l6-6c6-6%206-6%206-15%200-2%200-2-3-2s-4%200-5%204c-2%204-3%205-9%208-10%204-12%208-18%2023l-2%201c-2%200-3%201%200%204l1%203%201%204%201%205c0%202%201%202%203%202h3l-2-4c-2-5-2-5%200-9s5-7%2015-13c7-3%208-4%208-2l-4%203c-3%202-7%208-6%2010%201%204%202%2010%201%2012-1%203-1%203%201%203s3-1%203-3l1-3v6h106l1-5c2-4%202-4%202-2l3%202c2%200%201-3-1-4-2%200-2-1-2-6%201-10%202-12%204-12s2%200%201-1c-4-1-1-7%203-7l4-2-4-1-3-1%203-6c1%200%202-1%202-3s0-3-1-2l-1-12c0-14%201-15%208-12%206%201%206%202%208%206l4%206c4%204%206%209%206%2013s0%204%206-2c6-7%2010-9%2013-7%202%202%202%202%203-1%202-5%206-5%2012-2l9%202c5%200%2011%202%2011%205v7l1%205c4%200%205%204%204%2014l-6%2027%206%201c5%200%206%200%206-2l3-7%204-9c2-5%203-4%203%204%200%205-1%206-4%2010l-4%204h5l7-1c1-2%209-4%2015-4%209%200%208-2-1-3l-9-1c0-2%206-5%2014-6%2013-2%2014-3%202-3h-10l3-3%209-3%209-2%205-2h-8l-7-1c0-2%206-5%2011-6%209-2%2010-3%203-2h-7l2-2%208-5c5-2%207-5%203-3-2%200-2%200-1-2l2-2%201-1v-1c3-3%201-3-8-3-10%200-11%201-22%2011l-14%2014-7%207-2-3-3-3%209-5a210%20210%200%200065-65c2-1-1-5-5-7l-7-1-11-2c-14-5-23-4-30%202l-9%206c-2%201-7%203-10%206-10%206-43%2022-52%2023-9%202-16%202-22-2l-13-5-9-4c-1-1-2%200-5%203-4%204-10%206-14%205l-4%204-4%205c-2%200-6-4-7-9l-4-9c-3-5-3-8-3-13v-6l-3%201-3%203-1%201c0-2%200-2-2-2-7%203-10%203-17-1-6-2-14-3-21%200-7%202-13%201-14-2-1-2%200-7%201-10%201-2%200-2-6-1-5%200-7%200-5-1l8-1c7%200%2010-1%205-3-6-3-19-14-22-19-2-4-2-4-5-4l-3%201%202-2c2-2%203-2%202-5s-2-4-3-3l-1%202-1%202-1-1a161%20161%200%2000-21-46l9-27c0-2-1-2-9-2h-9l-1%206-3%206v3c1%201-2%2013-4%2014l-2%201c0%203-5%205-7%204l-6-4-6-5-4-2-6-5-4-3c-2%200-3-3-3-6h1l3-3c4-6%204-6-3-6-6%200-6%200-9%204m32-1l7%2021%203%207%201-3v-3l-1-2h2l-2-4-3-6-2-3-1-1-2-6-2-3v3m40%200c-1%205-1%208%201%2010%201%202%201%202-1%204-5%204-1%2018%208%2028l8%209c4%206%206%206%2014%201a56%2056%200%200116-8l-3-4c-9-10-9-24-1-32%205-4%2014-4%2020%201%205%203%207%203%207%201l6-7%207-6H77l-2%203m94-1c5%203%207%204%2015%2017%206%2010%2012%2016%2015%2016l2-2c2-1%202-1%206%201%203%201%205%202%208%201%205%200%206-2%208-12%201-8%204-14%207-19l2-3-34-1h-33l4%202m81%206l-13%2014c-12%2015-16%2023-12%2028%202%202%201%208-2%2018-3%208-4%2016-3%2019l-2%201c-2%200-3%200-4%203l-3%205c-2%202-2%202%202%207%204%206%207%2013%207%2018v3h-7l-9%201c-3%202-3%202%202%202s17%204%2015%206l-1%201-14%205c-4%203-3%203%202%201%203-2%208-3%2011-3%204-1%205-1%205-3-1-3%202-3%205%200l7%203%205%202%205%201%205%201h1l7-1h4l-3-3c0-4-1-7-4-7l-1-1-5-5-7-6a44%2044%200%20011-26l4-4c3-1%203-1%203%203l2%201c8%203%209%203%2012%201%203-3%203-3%205-1%201%202%2014%203%2021%202%203-1%204%202%201%203l-2%201h-1l-2%201c0%202-2%202-5%202-2%200-4%200-3%201%204%201%202%203-3%203l-5%201c-3%200-5%204-2%204l1%203c0%201%201%201%207-1%204-2%205-2%2013-2h10v1l-1%203-1%205-1%201-3%206c-5%205-4%206%200%203%205-4%208-8%2010-15%201-4%208-8%2015-9l4-1-1%203-1%204c-2%200-6%204-6%205l11-4%208-4%201-1c1-2%201-2-1-2-3%200-2-2%205-5%207-4%208-4%207-1%200%203%201%202%202-1%201-2%203-2%205-3%2010%200%2031-8%2039-13l8-5V42l-3-2-8-1h-4l2-4c3-7%204-8%200-8h-3l3-6c3-5%203-7%201-5-2%201-4%200-4-2%202-4-4-2-11%204l-3%201%2012-15%203-3-9-1-10%201h-1c-2-2-3-1-2%203%200%203%200%204-1%203l-7%203c1%202-2%204-4%204h-3c0%201%201%202%203%201%203%200%203%200%203%203%200%204-1%204-3%202h-5l-1-1v-1l-10%207c-1%202-5%204-6%203h-7l-5-2-2-1-1-1-1%201-4%202a189%20189%200%2000-7%201l-5%203-3%203v-2c0-3%200-3-3-3-2%201-2%201-2-2v-4c-1%200%200-3%202-5l6-17-21-1h-20l-6%208m59%2022c-10%202-18%207-19%2012l-1%202c-2%202%200%202%205%201l13-2c8-1%2013-4%2013-10%200-2-4-5-5-4l-6%201M165%2070l-3%202-2%201c-2%200-5%205-3%206v1c-2%202%202%209%205%209l1%202%201%203%201-3c0-2%200-2%202%200%200%202%201%203%202%203l1-3v-2c1-1%201-1%201%201h1l1-7%201-6v-4l-1-3h-8M17%20144c0%201%203%203%207%204l4%204c0%201-6%201-10-1l-4-2%2011%206c2%200%203%201%201%203l-4%207c-1%204-2%205-3%204-3%200-7%202-7%204l-2%201-2%202a1547%201547%200%2000-2%208c-2%202-2%202%200%204%203%202%2015-1%2012-3l1-1c2%200%202%200%201-2-1-1-1-1%201-1%203%201%203%201%202-2l3-11%201-7%201-2c2-1%203-5%203-6l1-1%202-3%202-3-4%201c-3%200-6%200-10-2l-5-1m94%203l-5%206c0%203-2%204-2%201%200-2-5-3-7-2-1%200%200%206%202%206v2l-2%201c-2%200-4%202-7%207-2%203-2%204%200%204l1-1h1l6-4c4-5%204-5%207-3l3%201v-4c0-2%201-4%205-8%206-8%206-12-2-6m113%205l3%206c3%206%203%208%200%205l-3-1%201%202%201%202h3c1-1%202%203%203%2010%201%204%201%204-3%200-3-4-4-4-4%200l2%202c2%200%204%204%205%2012v5l-3-5c-4-6-4-5-5-5l3%206%203%2010v5l-1-4-2-5c-2-2-5%200-5%202l-2%202c-3%202-1%203%202%201%202-1%206%206%206%2014l1%206-6-6c-6-6-10-8-5-2l4%206c1%204%201%204%205%204h5v-8c1-9%204-20%209-30%203-5%204-10%202-6-2%203-3%201-2-5v-5l-1%203c-2%205-3%204-4-5l-1-5-1%201-4-9h-1c-1%201-2%200-3-1l-2-2m138%2020h-3c-1-2-6%202-8%207-3%206-4%204-2-2l1-4c-2-1-10%2017-10%2020%200%202%204-1%206-4l2-3%209-8c8-7%2010-10%205-6'%20fill='%23d3d3d3'%20fill-rule='evenodd'/%3e%3c/svg%3e","aspectRatio":1.7777777777777777,"src":"/static/c78e234bbb2eca6373a163531a6ac909/710f0/08_Black-billed_Cuckoo1.jpg","srcSet":"/static/c78e234bbb2eca6373a163531a6ac909/3305a/08_Black-billed_Cuckoo1.jpg 240w,\n/static/c78e234bbb2eca6373a163531a6ac909/18e3d/08_Black-billed_Cuckoo1.jpg 480w,\n/static/c78e234bbb2eca6373a163531a6ac909/710f0/08_Black-billed_Cuckoo1.jpg 820w","sizes":"(max-width: 820px) 100vw, 820px"}}}}}},"pageContext":{"slug":"/write-twitter-bot-python-tweepy-unfollow-non-followers-command-line/"}}}
{"componentChunkName":"component---src-templates-blog-post-js","path":"/how-to-write-a-twitter-bot-with-python-and-tweepy/","result":{"data":{"markdownRemark":{"html":"<p>Twitter is <em>the</em> social media site for robots. You probably have robot friends and followers and don’t even realize it! In this tutorial, you will write your own Twitter bot with Python and tweepy, and then set it loose in the world.</p>\n<p>First we need to create a Twitter Application. Go to <a href=\"https://dev.twitter.com/\">https://dev.twitter.com/</a> and log in with your Twitter account.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53.75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/svg+xml,%3csvg%20xmlns=\\'http://www.w3.org/2000/svg\\'%20width=\\'400\\'%20height=\\'214\\'%20viewBox=\\'0%200%20400%20214\\'%20preserveAspectRatio=\\'none\\'%3e%3cpath%20d=\\'M116%2028h117v45H0v12h62l63%201v47l1%2050%2084%201c80%200%2082%200%2083-2l1-49V86l54-1h53V73H294l-1-23V28h54a8760%208760%200%2000-231%200m133%2023v14h29V36h-29v15m16-9c-5%200-5%201-5%203%200%206%201%207%2012%204%203%200%203-8%200-8l-7%201m-139%203c-4%204-1%209%205%209l4%201%202%201v-2c-2-1-2-3-1-4%201-6-6-9-10-5m132%208c-2%200-3%201-3%203l-2%205-2%202h13l3-1h3l-3-2-5-3c-2-1-1-1%202-1%204%200%207-1%206-3h-12M0%20145v8h38c36%200%2038%201%2040%202l1%2031v28h16v-36c0-32%200-37-2-38-1-2-7-2-47-2H0v7m0%2059l1%2010h7c9%200%2011-1%2011-10s-1-10-11-10H0v10m24-8l-1%202c0%202%202%202%2022%202%2022%201%2025%200%2022-3-1-2-42-3-43-1m-1%2012l1%203h21c14%200%2021-1%2022-2%203-3%200-3-22-3H23v2\\'%20fill=\\'%23d3d3d3\\'%20fill-rule=\\'evenodd\\'/%3e%3c/svg%3e'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Creating a new Twitter Application \"\n        title=\"Creating a new Twitter Application \"\n        src=\"/static/073b999ccc752e0e9aec7928e2871dec/36dbb/20131126_twitterBot01-1.jpg\"\n        srcset=\"/static/073b999ccc752e0e9aec7928e2871dec/f06cd/20131126_twitterBot01-1.jpg 240w,\n/static/073b999ccc752e0e9aec7928e2871dec/a5e48/20131126_twitterBot01-1.jpg 480w,\n/static/073b999ccc752e0e9aec7928e2871dec/36dbb/20131126_twitterBot01-1.jpg 700w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>Under your account toggle, select ‘My applications’. On the following screen, select the option to create a new application and fill in the required information.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 88.75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/svg+xml,%3csvg%20xmlns=\\'http://www.w3.org/2000/svg\\'%20width=\\'400\\'%20height=\\'354\\'%20viewBox=\\'0%200%20400%20354\\'%20preserveAspectRatio=\\'none\\'%3e%3cpath%20d=\\'M0%2018v2h47l-2%203c-7%209-6%2020%201%2028%204%204%206%208%203%205H37l-1-1-2%201h-5c-4%200-5%200-5%202l-1-1c-1-3-3-3-4%201-1%203-1%203%201%203%201-1%202%200%203%201%202%201%202%201%204-1h2c0%202%202%203%202%201l14-1c11%200%2013%200%2013-2h1c0%203%202%202%202%200l1-2%201%202c0%202%201%202%204%202l5-1h1l8%201c7%200%207%200%207-3%200-2%200-2-2-2h-2l-2-1-2%201h-9v-1c2%200%208-6%2010-10%202-7%200-23-4-23l-1-1%20162-1h163v-3l-1-3-200%201H0v3m49%206c-9%208-7%2021%203%2028%2014%207%2031-6%2027-20-4-9-8-12-18-12-8%200-8%200-12%204m-2%20140c-1%201%200%203%202%203l1-1h1l13%201h20c2%201%203%201%204-1h1l4%201c3%200%204-1%203-2%200-1-15-2-27-1H47m-13%2054l-5%201c-4%200-5%200-5%202l-1-1c-1-2-3-3-3%200v3c1-1%202%200%203%201%202%202%202%202%204%200h2c0%202%200%202%202%201l14-1c11%200%2013%200%2013-2h1l1%202%201-2c0-2-1-2-5-2l-5-1H37l-1-2-2%201m-2%2014c0%201-1%202-3%202l-2%201-3%202c-2%201-2%201-1%203l-1%203-1%202%201%202%201%202c-1%202%200%204%202%203l1%202c0%202%202%203%205%202l1%201%202%201%202-1%203-1c2%201%202%201%203-1l2-2c2-1%202-1%202-3-1-2-1-3%201-3%201-1%201-4-1-4v-3c0-3%200-3-2-3l-2-2c0-2-2-3-4-2h-2c0-2-4-3-4-1m3%208c-2%202-2%202-5%201l-3-2v3l2%204v4c-2%202%205%201%208-1%202-2%206-9%205-10-2-1-6-1-7%201m18%203v5l1-4%201-4h99a1668%201668%200%2000-1-2H53v5m-19%2043l-5%201c-4%200-5%200-5%202-1%201-1%201-1-1s-2-3-3%200v3l3%201c2%202%203%202%204%200h2c0%202%200%202%202%201l14-1c11%200%2013%200%2013-2h1l1%202%201-2c0-2-1-2-5-2s-5-1-5-2h-1l-2%201H37c0-2-3-2-3-1m-12%2012c-12%206-18%2023-13%2037%202%204%2011%2013%2013%2013v1l-1%202%202-1h22l6-4%205-4%202-3%201-2%203-1%202-1-1-2-1-8c0-13-5-23-16-27-6-3-18-3-24%200m5%202c-10%204-18%2015-17%2025%201%208%207%2017%2011%2017a3584%203584%200%20014%202c-6-1-2%202%204%203h11c5-1%208-3%205-3v-1h3l2-2c3-1%208-9%208-12%200-2%200-2-2-2l-3-1h-1l-1%201c-3-2-1-4%204-3h5l-1-3c-1-11-8-18-18-21-7-2-7-2-14%200\\'%20fill=\\'%23d3d3d3\\'%20fill-rule=\\'evenodd\\'/%3e%3c/svg%3e'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Settings tab in Twitter Application\"\n        title=\"Settings tab in Twitter Application\"\n        src=\"/static/e096f10ec5e50fea7be3e33ecddda1f7/1fe05/20131126_twitterBot02-1.jpg\"\n        srcset=\"/static/e096f10ec5e50fea7be3e33ecddda1f7/f06cd/20131126_twitterBot02-1.jpg 240w,\n/static/e096f10ec5e50fea7be3e33ecddda1f7/a5e48/20131126_twitterBot02-1.jpg 480w,\n/static/e096f10ec5e50fea7be3e33ecddda1f7/1fe05/20131126_twitterBot02-1.jpg 960w\"\n        sizes=\"(max-width: 960px) 100vw, 960px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>Once your new application is created, select its Settings tab and towards the bottom of the page click the ‘Read and Write’ radio button. Return to the Details tab and click the big blue button at the bottom of the page to generate your access keys.</p>\n<p>Next, we need to install tweepy. <a href=\"https://github.com/tweepy/tweepy\" title=\"tweepy\">tweepy</a> is the library we will be using to access the Twitter API with Python. From the command line, run:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"command-line-prompt\"><span data-user=dot data-host=ot></span></span>pip <span class=\"token function\">install</span> tweepy</code></pre></div>\n<p>If you don’t have <a href=\"https://pypi.python.org/pypi/pip\">pip</a> installed, run:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"command-line-prompt\"><span data-user=dot data-host=ot></span></span><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> python-pip</code></pre></div>\n<p>Now it’s time to make our robot. Open your favorite text editor or IDE and create a new file (don’t use a word processor; it will load your file with unnecessary junk). Save it as <strong>helloworld.py</strong></p>\n<p>Below is our complete code. Enter your Twitter application keys and tokens accordingly:</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\">#!/usr/bin/env python</span>\n<span class=\"token comment\"># -*- coding: utf-8 -*-</span>\n\n<span class=\"token keyword\">import</span> tweepy<span class=\"token punctuation\">,</span> time<span class=\"token punctuation\">,</span> sys\n\nargfile <span class=\"token operator\">=</span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>sys<span class=\"token punctuation\">.</span>argv<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">#enter the corresponding information from your Twitter application:</span>\nCONSUMER_KEY <span class=\"token operator\">=</span> <span class=\"token string\">'1234abcd...'</span><span class=\"token comment\">#keep the quotes, replace this with your consumer key</span>\nCONSUMER_SECRET <span class=\"token operator\">=</span> <span class=\"token string\">'1234abcd...'</span><span class=\"token comment\">#keep the quotes, replace this with your consumer secret key</span>\nACCESS_KEY <span class=\"token operator\">=</span> <span class=\"token string\">'1234abcd...'</span><span class=\"token comment\">#keep the quotes, replace this with your access token</span>\nACCESS_SECRET <span class=\"token operator\">=</span> <span class=\"token string\">'1234abcd...'</span><span class=\"token comment\">#keep the quotes, replace this with your access token secret</span>\nauth <span class=\"token operator\">=</span> tweepy<span class=\"token punctuation\">.</span>OAuthHandler<span class=\"token punctuation\">(</span>CONSUMER_KEY<span class=\"token punctuation\">,</span> CONSUMER_SECRET<span class=\"token punctuation\">)</span>\nauth<span class=\"token punctuation\">.</span>set_access_token<span class=\"token punctuation\">(</span>ACCESS_KEY<span class=\"token punctuation\">,</span> ACCESS_SECRET<span class=\"token punctuation\">)</span>\napi <span class=\"token operator\">=</span> tweepy<span class=\"token punctuation\">.</span>API<span class=\"token punctuation\">(</span>auth<span class=\"token punctuation\">)</span>\n\nfilename<span class=\"token operator\">=</span><span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span>argfile<span class=\"token punctuation\">,</span><span class=\"token string\">'r'</span><span class=\"token punctuation\">)</span>\nf<span class=\"token operator\">=</span>filename<span class=\"token punctuation\">.</span>readlines<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nfilename<span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">for</span> line <span class=\"token keyword\">in</span> f<span class=\"token punctuation\">:</span>\n    api<span class=\"token punctuation\">.</span>update_status<span class=\"token punctuation\">(</span>line<span class=\"token punctuation\">)</span>\n    time<span class=\"token punctuation\">.</span>sleep<span class=\"token punctuation\">(</span><span class=\"token number\">900</span><span class=\"token punctuation\">)</span><span class=\"token comment\">#Tweet every 15 minutes</span></code></pre></div>\n<p>That’s our robot. But it’s hungry. Let’s feed it! Create a new text file in the same directory as helloworld.py. Save it as <strong>helloworld.txt</strong>. Enter a few memorable lines, such as:</p>\n<blockquote>\n<p>Hello World!<br>\nI’m a robot!<br>\nRobots are superior to humans in every conceivable way!</p>\n</blockquote>\n<p>Be sure to use lots of exclamation points so your robot can be heard. Twitter is a noisy place. Also be sure there are no blank lines in-between your lines of text. Our robot is not an <a href=\"https://en.wikipedia.org/wiki/Existentialism\" title=\"Existentialism\">existentialist.</a></p>\n<p>Now we’re ready to go! At the command line enter:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"command-line-prompt\"><span data-user=dot data-host=ot></span></span>python helloworld.py helloworld.txt</code></pre></div>\n<p>Check your Twitter feed and you should see:</p>\n<blockquote>\n<p>Hello World!</p>\n</blockquote>\n<p>Let’s break that down into byte sized pieces.</p>\n<p>Our first line of Python,</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> tweepy<span class=\"token punctuation\">,</span> time<span class=\"token punctuation\">,</span> sys</code></pre></div>\n<p>includes the three packages we need for our program: tweepy, time &#x26; sys. We already know what <em>tweepy</em> is for. <em>time</em> will allow us to schedule intervals between our Tweets (so we don’t get in trouble with Twitter), and <em>sys</em> will allow us to feed our robot a file for it to read and Tweet.</p>\n<p>The next line is how we feed the file to our robot.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">argfile <span class=\"token operator\">=</span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>sys<span class=\"token punctuation\">.</span>argv<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>We’re assigning our text file to <em>argfile</em>. No, not arg as in the sound a pirate makes, but arg as in short for argument. When we run our program from the command line, we are passing the python interpreter two arguments, the first argument, <em>argv[0]</em>, is our .py file, <strong>helloworld.py</strong>; the second argument, <em>argv[1]</em>, is our text file, <strong>helloworld.tx</strong>t. What we are saying here is that <em>argfile</em> contains the string, <em>helloworld.txt</em>.</p>\n<p>The next big chunk of code is how we connect our robot to Twitter through our Application:</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">CONSUMER_KEY <span class=\"token operator\">=</span> <span class=\"token string\">'YOUR CONSUMER KEY'</span>\nCONSUMER_SECRET <span class=\"token operator\">=</span> <span class=\"token string\">'YOUR CONSUMER SECRET KEY'</span>\nACCESS_KEY <span class=\"token operator\">=</span> <span class=\"token string\">'YOUR ACCESS KEY'</span>\nACCESS_SECRET <span class=\"token operator\">=</span> <span class=\"token string\">'YOUR ACCESS SECRET KEY'</span>\nauth <span class=\"token operator\">=</span> tweepy<span class=\"token punctuation\">.</span>OAuthHandler<span class=\"token punctuation\">(</span>CONSUMER_KEY<span class=\"token punctuation\">,</span> CONSUMER_SECRET<span class=\"token punctuation\">)</span>\nauth<span class=\"token punctuation\">.</span>set_access_token<span class=\"token punctuation\">(</span>ACCESS_KEY<span class=\"token punctuation\">,</span> ACCESS_SECRET<span class=\"token punctuation\">)</span>\napi <span class=\"token operator\">=</span> tweepy<span class=\"token punctuation\">.</span>API<span class=\"token punctuation\">(</span>auth<span class=\"token punctuation\">)</span></code></pre></div>\n<p>Here we are creating a variable, <em>auth</em>, and via tweepy, we are authorizing our account with our consumer and access keys. We then create a variable, <em>api</em>, and via tweepy connect to the Twitter API with <em>auth</em>.</p>\n<p>After that, we open and read the helloworld.txt file:</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">filename<span class=\"token operator\">=</span><span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span>argfile<span class=\"token punctuation\">,</span><span class=\"token string\">'r'</span><span class=\"token punctuation\">)</span>\nf<span class=\"token operator\">=</span>filename<span class=\"token punctuation\">.</span>readlines<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nfilename<span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Here we’re using the <em>open()</em> function to read <em>argfile</em>, which you will recall is holding the string <em>helloworld.txt</em>. We read the file with the parameter, <em>‘r’</em>, for read. Next we read the lines of our file and pass them to a variable called <em>f</em>, for file. Finally, we close the file. Closing something you’ve opened is a good habit. Like the refrigerator.</p>\n<p>The last block of code is where the magic happens:</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">for</span> line <span class=\"token keyword\">in</span> f<span class=\"token punctuation\">:</span>\n    api<span class=\"token punctuation\">.</span>update_status<span class=\"token punctuation\">(</span>status<span class=\"token operator\">=</span>line<span class=\"token punctuation\">)</span>\n    time<span class=\"token punctuation\">.</span>sleep<span class=\"token punctuation\">(</span><span class=\"token number\">900</span><span class=\"token punctuation\">)</span><span class=\"token comment\">#Tweet every 15 minutes</span></code></pre></div>\n<p>Using a <em>for</em> loop, we iterate through every line stored in <em>f</em>. For each <em>line</em>, we send out a Tweet using <em>api.update</em>status(line)<em>. Then we tell our robot to snooze with _time.sleep(900)</em>. The <em>for</em> loop will continue until it reads and Tweets the last <em>line</em> in <em>f</em>(or finds an error in your file), and will then exit.</p>\n<p>That’s it! Keep in mind there are <a href=\"https://support.twitter.com/articles/68916-following-rules-and-best-practices#\" title=\"Twitter Best Practices\">best practices</a> to be followed on Twitter. You will want to check before you modify this code or you risk getting your account suspended. And that’s no fun for you or your robot.</p>\n<p>Special thanks to <a href=\"https://emerging.commons.gc.cuny.edu/2013/10/making-twitter-bot-python-tutorial/\">robincamille</a> for writing the post that inspired this tutorial.</p>","excerpt":"Twitter is the social media site for robots. You probably have robot friends and followers and don’t even realize it! In this tutorial, you…","frontmatter":{"title":"How To Write a Twitter Bot with Python and tweepy","author":"Jared Nielsen","category":"tutorial","image":{"childImageSharp":{"fluid":{"tracedSVG":"data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='400'%20height='214'%20viewBox='0%200%20400%20214'%20preserveAspectRatio='none'%3e%3cpath%20d='M0%20107v107h119l-4-5c-4-4-9-12-9-13l6-1c8%200%2034-5%2028-5-40-2-56-13-66-40l-2-8%206%202c7%202%2016%203%2020%202l3-1-4-1c-16-8-29-24-33-40-3-9-2-33%201-36l6%203c14%2011%2034%2022%2049%2027%2011%204%2011%204%209-1l-2-15c-2-12-2-14-3-6-2%208-3%208-3%200%200-6%200-9-2-11-4-6-2-16%204-26l3-5%201-3%201-8c-1-3-1-4%202-6%204-3%2013-4%2017-2%202%201%203%201%2010-2%2017-7%2024-8%2035-1%206%203%207%204%2010%203%206-3%2016%200%2019%206%202%202%202%204%202%2010%200%207%200%207%203%2010%2014%2012%2026%2037%2030%2058l1%208h11c27-2%2055-12%2083-31l12-8%203%209c5%2027-7%2052-33%2065l-6%204h3c4%201%2015%200%2021-2s6-2%203%206c-8%2024-28%2039-53%2039l-8%201-4%201%207%201%2017%203%209%201c0%202-4%2010-8%2014l-4%204h91V0H0v107m208-84c-3%205%204%2012%209%208s3-11-4-11c-2%200-3%201-5%203m-74%2036l-10%203-3%201%202%202%202%203c0%202%204%204%209%205%201%201%202%203%202%209%201%2010%203%2017%206%2019%201%202%202%203%201%206l-2%2011-4%2012-3%206%208-6%201-1c1%200%201%206-1%209l1%202c2%200%206-11%208-22l2-12h4c10-2%2024-10%2045-24%2012-9%2013-10%2010-14-3-3-13-6-14-5l-3%2011-4%2010-7-12-10-13h-40'%20fill='%23d3d3d3'%20fill-rule='evenodd'/%3e%3c/svg%3e","aspectRatio":1.8604651162790697,"src":"/static/cb22c08443238726f2df3882174c34eb/104b3/guidoTwitterBot_final.png","srcSet":"/static/cb22c08443238726f2df3882174c34eb/5ae31/guidoTwitterBot_final.png 240w,\n/static/cb22c08443238726f2df3882174c34eb/88c65/guidoTwitterBot_final.png 480w,\n/static/cb22c08443238726f2df3882174c34eb/104b3/guidoTwitterBot_final.png 960w","sizes":"(max-width: 960px) 100vw, 960px"}}}}}},"pageContext":{"slug":"/how-to-write-a-twitter-bot-with-python-and-tweepy/"}}}